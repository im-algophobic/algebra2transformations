<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>10 Minutes Till Dawn</title>
  <link rel="shortcut icon" href="images/ico.ico" type="image/x-icon">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7FN7LEVWXD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7FN7LEVWXD');
  </script>

  <!-- Unity Loader -->
  <script src="https://cdn.jsdelivr.net/gh/Rolandelving/10-minutes-till-dawn@main/Build/UnityLoader.js"></script>

  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      background: #000;
      overflow: hidden;
    }

    #gameContainer {
      position: absolute;
      background: transparent !important;
    }

    #gameContainer canvas {
      position: absolute;
    }

    #gameContainer[data-pixelated="true"] canvas {
      image-rendering: optimizeSpeed;
      image-rendering: -webkit-crisp-edges;
      image-rendering: -moz-crisp-edges;
      image-rendering: -o-crisp-edges;
      image-rendering: crisp-edges;
      image-rendering: -webkit-optimize-contrast;
      image-rendering: optimize-contrast;
      image-rendering: pixelated;
      -ms-interpolation-mode: nearest-neighbor;
    }
  </style>
</head>

<body>
  <div id="gameContainer" data-pixelated="true"></div>

  <script>
    // Unity WebGL URLs (githack)
    const unityJson = "https://rawcdn.githack.com/a456pur/seraph/ae2fcc6d6a9cd051654fcc0519080db1f79cf2a7/games/10minutestilldawn/Build/10MinutesTillDawnWebGL.json";

    // Instantiate Unity
    const gameInstance = UnityLoader.instantiate("gameContainer", unityJson);

    let scaleToFit = true;
function onResize() {
      const canvas = gameInstance.Module.canvas;
      const container = gameInstance.container;
      let w, h;

      if (scaleToFit) {
        w = window.innerWidth;
        h = window.innerHeight;

        const r = 675 / 1200; // Aspect ratio
        if (w * r > window.innerHeight) {
          w = Math.min(w, Math.ceil(h / r));
        }
        h = Math.floor(w * r);
      } else {
        w = 1200;
        h = 675;
      }

      container.style.width = canvas.style.width = w + "px";
      container.style.height = canvas.style.height = h + "px";
      container.style.top = Math.floor((window.innerHeight - h) / 2) + "px";
      container.style.left = Math.floor((window.innerWidth - w) / 2) + "px";
    }

    window.addEventListener('load', onResize);
    window.addEventListener('resize', onResize);
  </script>
</body>
</html>